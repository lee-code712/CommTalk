{"version":3,"file":"js/352.d91c385b.js","mappings":"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","sources":["webpack://frontend/./src/views/EditView.vue","webpack://frontend/./src/views/EditView.vue?eb6a"],"sourcesContent":["<template>\r\n  <div class=\"edit-view\">\r\n    <HeaderLayout />\r\n    <SubHeader />\r\n\r\n    <div class=\"full-container\">\r\n      <strong class=\"board-name\">{{ boardName }}</strong>\r\n      <div class=\"title-content-wrap\">\r\n        <div class=\"title\">\r\n          <input type=\"text\" placeholder=\"제목\" v-model=\"title\" />\r\n        </div>\r\n        <div class=\"content\">\r\n          <textarea placeholder=\"내용\" v-model=\"content\"></textarea>\r\n\r\n          <div class=\"image-preview\">\r\n            <div class=\"image-preview-inner\" v-for=\"(image, index) in imagePreviews\" :key=\"index\">\r\n              <img :src=\"image.previewURL\" alt=\"Preview\" />\r\n              <div class=\"img-name\">{{ image.name }}</div>\r\n              <button @click=\"removeImage(index)\">삭제</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"hashtag-wrap\">\r\n          <div class=\"hashtag-inner\">\r\n            <div class=\"hashtags\">\r\n              <div class=\"hashtag\" v-for=\"(hashtag, index) in hashtags\" :key=\"index\">\r\n                # {{ hashtag }}\r\n                <button class=\"remove-hashtag-btn\" @click=\"removeHashtag(index)\">\r\n                  <img src=\"@/assets/images/fi-rr-cross-small.png\" style=\"width: 12px; height: 12px;\" />\r\n                </button>\r\n              </div>\r\n              # <input type=\"text\" placeholder=\"태그 입력 (최대 20개)\" v-model=\"newHashtag\" @keyup.enter=\"addHashtag\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"detail-btn-wrap\">\r\n          <div class=\"anonymous-file-wrap\">\r\n            <div class=\"checkbox-container\">\r\n              <input\r\n                type=\"checkbox\"\r\n                :id=\"'checkbox01'\"\r\n                v-model=\"isAnonymous\"\r\n              />\r\n              <label :for=\"'checkbox01'\">\r\n                <span class=\"checkbox-icon\"></span>\r\n                익명\r\n              </label>\r\n            </div>\r\n            \r\n            <div class=\"checkbox-container\">\r\n              <input\r\n                type=\"checkbox\"\r\n                :id=\"'checkbox02'\"\r\n                v-model=\"isCommentable\"\r\n              />\r\n              <label :for=\"'checkbox02'\">\r\n                <span class=\"checkbox-icon\"></span>\r\n                댓글 허용\r\n              </label>\r\n            </div>\r\n\r\n            <label for=\"file\">\r\n              <div class=\"btn-upload\"><img src=\"@/assets/images/fi-rr-cloud-upload.png\" style=\"width: 14px; height: 14px;\"/>파일 업로드하기</div>\r\n            </label>\r\n            <input type=\"file\" id=\"file\" ref=\"fileInput\" multiple @change=\"handleFileChange\" />\r\n          </div>\r\n\r\n          <div class=\"btn-wrap\">\r\n            <router-link :to=\"'/list?boardId=' + boardId\" class=\"router-link-class\">\r\n              <button type=\"button\" class=\"cancel-btn\">취소</button>\r\n            </router-link>\r\n            <button type=\"submit\" class=\"register-btn\" @click=\"submitPost\">등록</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <FooterLayout />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nimport HeaderLayout from \"@/components/layout/common/HeaderLayout.vue\";\r\nimport SubHeader from \"@/components/layout/common/SubHeader.vue\";\r\nimport FooterLayout from \"@/components/layout/common/FooterLayout.vue\";\r\n\r\nexport default {\r\n  name: 'EditView',\r\n  data() {\r\n    return {\r\n      headers: [],\r\n      link: '',\r\n      imagePreviews: [],\r\n      newHashtag: '',\r\n      hashtags: [],\r\n      boardName: '',\r\n      isAnonymous: true,\r\n      isCommentable: true,\r\n      boardId: this.$route.query.boardId\r\n    };\r\n  },\r\n  created() {\r\n    this.setupHeaders();\r\n    this.getBoardName();\r\n  },\r\n  components: {\r\n    HeaderLayout,\r\n    SubHeader,\r\n    FooterLayout\r\n  },\r\n  methods: {\r\n    setupHeaders() {\r\n      /* http 요청 헤더를 설정하고 엔드포인트에 대한 인증 토큰을 포함 */\r\n      const token = localStorage.getItem('token');\r\n\r\n      this.link = 'http://' + window.location.host;\r\n      this.headers = {\r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json',\r\n      };\r\n    },\r\n    getBoardName() { /* 게시판 이름 가져옴 */\r\n      const boardId = this.$route.query.boardId;\r\n\r\n      axios\r\n        .get(`/api/post/getBoard/${boardId}`, { headers: this.headers })\r\n        .then(response => {\r\n          this.boardName = response.data.boardName;\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n        });\r\n    },\r\n    addHashtag() { /* 새 해시태그 추가 */\r\n      if (this.newHashtag.trim() !== '') {\r\n        /* 새 해시태그 배열에 추가 */\r\n        this.hashtags.push(this.newHashtag);\r\n        /* 입력 필드 초기화 */\r\n        this.newHashtag = '';\r\n      }\r\n    },\r\n    removeHashtag(index) { /* 선택한 해시태그 제거 */\r\n      /* 배열에서 선택한 해시태그 제거 */\r\n      this.hashtags.splice(index, 1);\r\n    },\r\n    handleFileChange(event) { /* 파일 선택(input[type=\"file\"])이 변경되었을 때 호출 */\r\n      /* 선택된 파일 목록을 가져옴 */\r\n      const files = event.target.files;\r\n\r\n      for (let i = 0; i < files.length; i++) {\r\n        /* 현재 파일을 가져옴 */\r\n        const file = files[i];\r\n        const reader = new FileReader();\r\n\r\n        /* 파일을 읽을 때 동작 정의 */\r\n        reader.onload = () => {\r\n          /* 이미지 미리보기 데이터를 배열에 추가 */\r\n          this.imagePreviews.push({\r\n            /* 이미지 미리보기 URL */\r\n            previewURL: reader.result,\r\n            /* 파일 이름 */\r\n            name: file.name,\r\n            /* 파일 자체 */\r\n            file: file\r\n          });\r\n        };\r\n\r\n        /* 파일을 데이터 URL로 변환 */\r\n        reader.readAsDataURL(file);\r\n      }\r\n    },\r\n    removeImage(index) { /* 이미지 미리보기에서 이미지 제거 */\r\n      /* 선택한 이미지를 배열에서 제거하고 반환 */\r\n      const removedImage = this.imagePreviews.splice(index, 1)[0];\r\n\r\n      if (removedImage && removedImage.file) {\r\n        /* 이미지 URL 해제 */\r\n        URL.revokeObjectURL(removedImage.previewURL);\r\n      }\r\n    },\r\n    submitPost() {\r\n      /* 작성한 게시글 서버로 전송 */\r\n      const boardId = this.$route.query.boardId;\r\n\r\n      const data = {\r\n        \"boardId\": boardId,\r\n        \"title\": this.title,\r\n        \"content\": this.content,\r\n        \"isAnonymous\": this.isAnonymous ? 1 : 0,\r\n        \"isCommentable\": this.isCommentable ? 1 : 0,\r\n        \"hashtags\": this.hashtags\r\n      };\r\n\r\n      axios\r\n        .post(`/api/post/createPost`, data, { headers: this.headers })\r\n        .then(response => {\r\n          console.log(response.data);\r\n          \r\n          this.uploadImageUrl(response.data.postId);\r\n          \r\n          this.$router.push(`/list?boardId=${boardId}`);\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n        });\r\n    },\r\n    uploadImageUrl(postId) {\r\n      const formData = new FormData();\r\n\r\nfor (const image of this.imagePreviews) {\r\n  formData.append('images', image.file);\r\n}\r\n\r\nif (formData.has('images')) { // 이미지가 있는 경우에만 요청을 보냅니다.\r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n      'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n    },\r\n  };\r\n\r\n  /* 파일 업로드 요청 보내기 */\r\n  axios\r\n    .post(`/api/file/upload/${postId}`, formData, config)\r\n    .then((response) => {\r\n      console.log('파일 업로드 성공:', response.data);\r\n    })\r\n    .catch((err) => {\r\n      console.error('파일 업로드 실패:', err);\r\n    });\r\n} else {\r\n  console.log('이미지가 없어서 파일 업로드 요청을 보내지 않습니다.');\r\n}\r\n\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import \"@/assets/scss/pattern/pattern.scss\";\r\n  @import \"@/assets/scss/pattern/layout.scss\";\r\n  @import \"@/assets/scss/edit.scss\";\r\n  @import \"@/assets/scss/common.scss\";\r\n</style>","import { render } from \"./EditView.vue?vue&type=template&id=06675933\"\nimport script from \"./EditView.vue?vue&type=script&lang=js\"\nexport * from \"./EditView.vue?vue&type=script&lang=js\"\n\nimport \"./EditView.vue?vue&type=style&index=0&id=06675933&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","_imports_0","style","_hoisted_15","for","_imports_1","type","_createElementBlock","_hoisted_1","_createVNode","_component_HeaderLayout","_component_SubHeader","_hoisted_2","_hoisted_3","_toDisplayString","$data","boardName","_hoisted_4","_hoisted_5","placeholder","_ctx","title","$event","_hoisted_6","content","_hoisted_7","_Fragment","_renderList","imagePreviews","image","index","key","previewURL","alt","_hoisted_9","name","onClick","$options","removeImage","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","hashtags","hashtag","removeHashtag","newHashtag","onKeyup","_cache","_withKeys","args","addHashtag","_hoisted_17","_hoisted_18","_hoisted_19","id","isAnonymous","_hoisted_20","_hoisted_21","isCommentable","_hoisted_22","_hoisted_23","ref","multiple","onChange","handleFileChange","_hoisted_24","_component_router_link","to","boardId","_hoisted_25","submitPost","_component_FooterLayout","data","headers","link","this","$route","query","created","setupHeaders","getBoardName","components","HeaderLayout","SubHeader","FooterLayout","methods","token","localStorage","getItem","window","location","host","axios","get","then","response","catch","err","console","error","trim","push","splice","event","files","target","i","length","file","reader","FileReader","onload","result","readAsDataURL","removedImage","URL","revokeObjectURL","post","log","uploadImageUrl","postId","$router","formData","FormData","append","has","config","__exports__","render"],"sourceRoot":""}