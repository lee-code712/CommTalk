"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[290],{5290:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var s=a(6252),n=a(3577),o=a(9963),i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMgSURBVHgB7dxNbtNQEAfwcSqksssR2huUG9ANX7tsUKErixUryAmAE9CuWHqFQGy6RMomvQE5Qm7QLiPAfnieU6BVPvxsj99M+/9JlaImkp/nH8f289hEAAAAAAAAAAAAAAAAAAAAANBC9uX7XpadDUk5P87yj3qSkLDs2+QNFfSeyFXFdzQjKkbpi6dzUiT7PDmgHfpYDvDh8l/zgtzpq6MnJyRINICq+G7VClzSIDlMnz+akQLL4k//fkn+U4YwlgxhQJIK93bNO8PyvWkZ0AFFtqn4bEDJOxIkFsDyd3Rvw0eih7Ct+EvDT4L7BNktYLtoIdQsvre7WFySELEAqp2sO6/x0d5DCCk+JcksTUf2AvDywbhcgzqD7y2EoOLz2It8RIJEA0iPy6OcnA61hBBc/HLs0ofL4ucBLGzFZQ5RGxX/WP4wuZcAWMwQtBbfL416FCMEzcX3S6Se9RmC9uL7pVIEfYRgofh+yRSJZAhWiu+XThFJhGCp+H4EFFmXIVgrvh8FKdBFCBaL70dCSrQJwWrxmZoAWJMQ6Ff5ymjxmaoAWHAIfhVsFp+pC4AFhlCDzuIzlQGw7kLQW3ymNgDWPgTdxWeqA2DNQ9BffKY+ABYego3is9gX5YU4ontkwi3+CdLV/LXOLd8J6w/hDhyG6g7hjpyI6Q3B+FTEVbtLvG6LtgxPxlWHmv5l5JaXNoxOR18/ztfQd9SUwQsyq0+yrIZg7JLk5jNciyEYuihfb3rBWghG2lLC5nYshWCgMavZxJqVEJS3Jrab1bQQguLm3G6mlLWHoLQ9vdv5fM0hKLxBQ+ZiitYQ5O+UV9Q0pTEE2Tvl+f7aZOeHpr4dbSEIX5IcnGlrmgq/cZCfHyFHbAvIsumQ7v+82P7JOBfQQ7aEhSv2XwvdLSm3BewuVH3zbwrcEsTI7gO+Ti7Wf8N0tI7U2BLm6dHjfRIi/LSU3x9Wv6Gnb2f7luBOSZDsnfIvn51QkY/Ll/N//3Xn2pqm/Fhc/qB6mNQVDsSNU+EHNvWm70eBNcWPVbMwTgAAAAAAAAAAAAAAAAAAAADd/gDwYpRLHpuW+AAAAABJRU5ErkJggg==";const l={class:"edit-view"},r={class:"full-container"},h={class:"board-name"},c={class:"title-content-wrap"},d={class:"title"},A={class:"content"},m={class:"image-preview"},g=["src"],u={class:"img-name"},p=["onClick"],w={class:"hashtag-wrap"},v={class:"hashtag-inner"},b={class:"hashtags"},y=["onClick"],f=(0,s._)("img",{src:i,style:{width:"12px",height:"12px"}},null,-1),k=[f],L={class:"detail-btn-wrap"},C={class:"anonymous-file-wrap"},U={class:"checkbox-container"},H=(0,s._)("label",{for:"checkbox01"},[(0,s._)("span",{class:"checkbox-icon"}),(0,s.Uk)(" 익명 ")],-1),I={class:"checkbox-container"},Q=(0,s._)("label",{for:"checkbox02"},[(0,s._)("span",{class:"checkbox-icon"}),(0,s.Uk)(" 댓글 허용 ")],-1),x={class:"btn-wrap"},B=(0,s._)("button",{type:"button",class:"cancel-btn"},"취소",-1);function _(e,t,a,i,f,_){const D=(0,s.up)("HeaderLayout"),F=(0,s.up)("SubHeader"),E=(0,s.up)("FooterLayout");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(D),(0,s.Wm)(F),(0,s._)("div",r,[(0,s._)("strong",h,(0,n.zw)(f.boardName),1),(0,s._)("div",c,[(0,s._)("div",d,[(0,s.wy)((0,s._)("input",{type:"text",placeholder:"제목","onUpdate:modelValue":t[0]||(t[0]=t=>e.title=t)},null,512),[[o.nr,e.title]])]),(0,s._)("div",A,[(0,s.wy)((0,s._)("textarea",{placeholder:"내용","onUpdate:modelValue":t[1]||(t[1]=t=>e.content=t)},null,512),[[o.nr,e.content]]),(0,s._)("div",m,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.imagePreviews,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"image-preview-inner",key:t},[(0,s._)("img",{src:e.previewURL,alt:"Preview"},null,8,g),(0,s._)("div",u,(0,n.zw)(e.name),1),(0,s._)("button",{onClick:e=>_.removeImage(t)},"삭제",8,p)])))),128))])]),(0,s._)("div",w,[(0,s._)("div",v,[(0,s._)("div",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.hashtags,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"hashtag",key:t},[(0,s.Uk)(" # "+(0,n.zw)(e)+" ",1),(0,s._)("button",{class:"remove-hashtag-btn",onClick:e=>_.removeHashtag(t)},k,8,y)])))),128)),(0,s.Uk)(" # "),(0,s.wy)((0,s._)("input",{type:"text",placeholder:"태그 입력 (최대 20개)","onUpdate:modelValue":t[2]||(t[2]=e=>f.newHashtag=e),onKeyup:t[3]||(t[3]=(0,o.D2)(((...e)=>_.addHashtag&&_.addHashtag(...e)),["enter"]))},null,544),[[o.nr,f.newHashtag]])])])]),(0,s._)("div",L,[(0,s._)("div",C,[(0,s._)("div",U,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:"checkbox01","onUpdate:modelValue":t[4]||(t[4]=e=>f.isAnonymous=e)},null,512),[[o.e8,f.isAnonymous]]),H]),(0,s._)("div",I,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:"checkbox02","onUpdate:modelValue":t[5]||(t[5]=e=>f.isCommentable=e)},null,512),[[o.e8,f.isCommentable]]),Q]),(0,s._)("input",{type:"file",ref:"fileInput",multiple:"",onChange:t[6]||(t[6]=(...e)=>_.handleFileChange&&_.handleFileChange(...e))},null,544)]),(0,s._)("div",x,[B,(0,s._)("button",{type:"submit",class:"register-btn",onClick:t[7]||(t[7]=(...e)=>_.submitPost&&_.submitPost(...e))},"등록")])])])]),(0,s.Wm)(E)])}a(7658),a(6229),a(7330),a(2062);var D=a(6154),F=a(9937),E=a(2915),N=a(4014),S={name:"EditView",data(){return{headers:[],link:"",imagePreviews:[],newHashtag:"",hashtags:[],boardName:"",isAnonymous:!1,isCommentable:!1}},created(){this.setupHeaders(),this.getBoardName()},components:{HeaderLayout:F.Z,SubHeader:E.Z,FooterLayout:N.Z},methods:{setupHeaders(){const e=localStorage.getItem("token");this.link="http://"+window.location.host,this.headers={Authorization:`Bearer ${e}`,"Content-Type":"application/json"}},getBoardName(){const e=this.$route.query.boardId;D.Z.get(`/api/post/getBoard/${e}`,{headers:this.headers}).then((e=>{this.boardName=e.data.boardName})).catch((e=>{console.error(e)}))},addHashtag(){""!==this.newHashtag.trim()&&(this.hashtags.push(this.newHashtag),this.newHashtag="")},removeHashtag(e){this.hashtags.splice(e,1)},handleFileChange(e){const t=e.target.files;for(let a=0;a<t.length;a++){const e=t[a],s=new FileReader;s.onload=()=>{this.imagePreviews.push({previewURL:s.result,name:e.name,file:e})},s.readAsDataURL(e)}},removeImage(e){const t=this.imagePreviews.splice(e,1)[0];t&&t.file&&URL.revokeObjectURL(t.previewURL)},submitPost(){const e=this.$route.query.boardId,t={boardId:e,title:this.title,content:this.content,isAnonymous:this.isAnonymous?1:0,isCommentable:this.isCommentable?1:0,hashtags:this.hashtags};D.Z.post("/api/post/createPost",t,{headers:this.headers}).then((e=>{console.log(e.data),this.uploadImageUrl(e.data.postId)})).catch((e=>{console.error(e)}))},uploadImageUrl(e){const t=new FormData;for(const s of this.imagePreviews)t.append("images",s.file);const a={headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}};D.Z.post(`/api/file/upload/${e}`,t,a).then((e=>{console.log("파일 업로드 성공:",e.data)})).catch((e=>{console.error("파일 업로드 실패:",e)}))}}},W=a(3744);const R=(0,W.Z)(S,[["render",_]]);var P=R}}]);
//# sourceMappingURL=290.4f9db705.js.map